
jQuery ->

  $( ".box" ).bind( "toggle-minimized", ->
    $(this).find( ".content" ).toggle( "blind" )
  )

  $( ".box .minimize" ).click( ->
    $(this).closest( ".box" ).trigger( "toggle-minimized" )
  )

  $( ".box .head" ).dblclick( (event) ->
    $(this).closest( ".box" ).trigger( "toggle-minimized" )
  ).disableTextSelect()

  $.extend($.fn.disableTextSelect = function() {
    return this.each(function(){
      if($.browser.mozilla){//Firefox
        $(this).css('MozUserSelect','none');
      }else if($.browser.msie){//IE
        $(this).bind('selectstart',function(){return false;});
      }else{//Opera, etc.
        $(this).mousedown(function(){return false;});
      }
    });
  });