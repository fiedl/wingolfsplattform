# -*- coding: utf-8 -*-

module Structureable

  def is_structureable( options = {} )
    
    before_destroy   :destroy_links

    include StructureableInstanceMethods
  end

  module StructureableInstanceMethods

    def destroy_links
      links = self.links_as_parent + self.links_as_child
      for link in links do
        if link.destroyable?
          link.destroy
        else
          raise "Could not destroy links of the group that should be deleted." # TODO: Das sollte eigentlich nicht n√∂tig sein.
          return false
        end  
      end  
    end

  end

end
