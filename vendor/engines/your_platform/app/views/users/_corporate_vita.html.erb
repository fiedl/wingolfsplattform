
<% if user %>

<table id="corporate_vita">
  <% for corporation in user.corporations %>

  <tr>
    <th colspan="3"><%=h corporation.title %></th>
  </tr>

  <% memberships_for_the_corporate_vita = StatusGroupMembership
     .find_all_by_user_and_corporation( user, corporation ) 
     .now_and_in_the_past %>

  <% for sub_group_membership in memberships_for_the_corporate_vita %>

  <tr>
    <td></td>
    <td>
      <%= best_in_place sub_group_membership,
          :created_at,
          type: :date,
          display_with: lambda { |v| l( v.to_date ) },
          path: user_group_membership_path( 
	  { 
	  user_id: sub_group_membership.user.id,
          group_id: sub_group_membership.group.id,
          controller: :user_group_memberships,
          action: :update,
          format: :json  
	  } )
          %>
    </td>
    <td>
      <%= link_to sub_group_membership.group.title, sub_group_membership.group %>
    </td>
  </tr>

  <% end %>

  <% end %>

</table>


<% end %>
